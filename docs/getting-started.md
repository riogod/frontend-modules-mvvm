# Быстрый старт

Это руководство поможет вам быстро начать работу с Modular Frontend Platform (MFP). Вы узнаете, как установить зависимости, запустить проект и начать разработку.

## Требования

Перед началом работы убедитесь, что у вас установлены:

- **Node.js** версии 18 или выше
- **npm** версии 9 или выше (обычно поставляется с Node.js)

> **Проверка версий:**
>
> ```bash
> node --version  # Должно быть v18.x.x или выше
> npm --version   # Должно быть 9.x.x или выше
> ```

## Установка

### 1. Клонирование репозитория

Если вы еще не склонировали проект, выполните:

```bash
git clone <repository-url>
cd frontend-modules-mvvm
```

### 2. Установка зависимостей

Проект использует npm workspaces для управления зависимостями всех модулей и библиотек. Установка выполняется одной командой:

```bash
npm install
```

## Запуск проекта

MFP предоставляет несколько способов запуска проекта в режиме разработки. Выберите подходящий для вашей задачи.

### Интерактивный лаунчер

Самый удобный способ для начала работы:

```bash
npm start
# или
npm run dev
```

> **Подробнее:** См. [Лаунчер](./tools/launcher.md) для детального описания работы с конфигурациями.

## Первый запуск

### Создание конфигурации

При первом запуске через `npm start` вам будет предложено создать конфигурацию для разработки. Следуйте инструкциям:

1. **Выберите модули** — укажите, какие модули использовать (LOCAL/REMOTE/Пропустить)
2. **Настройте параметры конфигурации:**
   - Уровень логирования (INFO рекомендуется для начала)
   - Использование локальных моков (рекомендуется включить для разработки)
   - API URL (оставьте пустым, если используете моки)
3. **Введите имя конфигурации** (например, "Development")
4. **Опционально:** добавьте описание

### Рекомендуемая первая конфигурация

Для начала работы рекомендуется создать конфигурацию со следующими настройками:

- **Модули:** Все модули из `packages/` установлены как LOCAL
- **Уровень логирования:** INFO
- **Локальные моки:** Включены
- **API URL:** Пустой

Это позволит работать с приложением без необходимости настройки удаленного API.

## Структура запущенных сервисов

После успешного запуска у вас будут работать:

| Сервис          | Порт | Назначение                                                          |
| --------------- | ---- | ------------------------------------------------------------------- |
| Vite Dev Server | 4200 | Основное приложение, HMR, проксирование запросов                    |
| Dev Server      | 1337 | Обработка API запросов, MSW моки, проксирование на удаленный сервер |

### Проверка работы сервисов

Откройте в браузере:

- **Приложение:** http://localhost:4200
- **Dev Server API:** http://localhost:1337/app/start (должен вернуть JSON с манифестом)

## Что дальше?

После успешного запуска проекта:

1. **Изучите архитектуру:** Прочитайте [Архитектура](./architecture.md) для понимания основных принципов
2. **Создайте модуль:** Следуйте руководству [Создание модуля](./modules/creating-module.md)
3. **Изучите MVVM:** Ознакомьтесь с [MVVM паттерном](./modules/mvvm-pattern.md)
4. **Настройте разработку:** См. [Разработка](./tools/development.md) для деталей о режимах разработки

## Устранение проблем

### Порт уже занят

Если порт 4200 или 1337 занят другим процессом:

**Для Vite (порт 4200):**
Измените порт в `host/vite.config.mts`:

```typescript
server: {
  port: 4201, // Измените на свободный порт
  // ...
}
```

**Для Dev Server (порт 1337):**
Измените порт в `config/dev-server/index.ts` (найдите `app.listen(1337)`).

### Модули не загружаются

1. Проверьте, что модули находятся в директории `packages/`
2. Убедитесь, что у каждого модуля есть `package.json` и правильная структура
3. Проверьте конфигурацию в `.launcher/configs.json`
4. Посмотрите логи в консоли браузера (F12)
5. Можно включить дебаг режим в конфигурации и посмотреть логи в консоли

### Ошибки при установке зависимостей

1. Убедитесь, что версия Node.js соответствует требованиям (18+)
2. Очистите кеш npm: `npm cache clean --force`
3. Удалите `node_modules` и `package-lock.json`, затем выполните `npm install` заново
4. Проверьте, что у вас достаточно прав для записи в директорию проекта
5. В случае ошибки с установкой зависимостей, попробуйте выполнить `npm install --legacy-peer-deps`

### TypeScript ошибки после установки

После установки автоматически выполняется `sync:tsconfig-paths`. Если возникают ошибки:

```bash
npm run sync:tsconfig-paths
```

## Режим Preview

Для просмотра готового приложения в режиме production, выполните команду:

```bash
npm run preview
```

Эта команда соберет приложение и запустит его на порту 4300.
В данной конфигурации все модули будут загружены как REMOTE модули и вам необходимо будет настроить API URL в конфигурации.
Так же пеобходимо создать эндпоинт который будет отдавать манифест. (пример такого локального сервера для проведения тестов расположен в examles\manifest-server)

В этом режиме можно локально протестировать приложение в приближенном к боевому режиме.

## Полезные команды

| Команда             | Описание                               |
| ------------------- | -------------------------------------- |
| `npm start`         | Запуск через интерактивный лаунчер     |
| `npm run build`     | Сборка host приложения                 |
| `npm run build:all` | Сборка всех модулей и host             |
| `npm run lint`      | Проверка кода всех модулей и библиотек |
| `npm test`          | Запуск всех тестов                     |
| `npm run storybook` | Запуск Storybook для UI библиотеки     |

---

> **Совет:** Если вы новичок в проекте, начните с изучения [Архитектуры](./architecture.md) и [Структуры проекта](./project-structure.md), чтобы понять, как организован код.
