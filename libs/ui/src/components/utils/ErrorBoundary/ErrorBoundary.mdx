import {
  Meta,
  Canvas,
  Story,
  Controls,
  Description,
  ArgTypes,
} from '@storybook/addon-docs/blocks';
import { ErrorBoundary } from './ErrorBoundary';
import * as ErrorBoundaryStories from './ErrorBoundary.stories';

<Meta of={ErrorBoundaryStories} />

# ErrorBoundary

<Description of={ErrorBoundaryStories} />

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ErrorBoundary` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ JavaScript –≤ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤ Logger –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç fallback UI –≤–º–µ—Å—Ç–æ –∫—Ä–∞—à–∞ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫** –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** —á–µ—Ä–µ–∑ Logger —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
- ‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π fallback UI** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ **Callback —Ñ—É–Ω–∫—Ü–∏—è** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–µ–∫–∞ –æ—à–∏–±–æ–∫** –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ErrorBoundary` –¥–ª—è:

- **–û–±–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∫—Ä–∞—à–∞** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é** –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
- **–°–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## üìö API Reference

<ArgTypes of={ErrorBoundaryStories.Default} />

### Props

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**

| Prop               | –¢–∏–ø                                                              | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é      | –û–ø–∏—Å–∞–Ω–∏–µ                                                  |
| ------------------ | ---------------------------------------------------------------- | ----------------- | --------------------------------------------------------- |
| `children`         | `ReactNode`                                                      | ‚Äî                 | –î–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ–±–µ—Ä–Ω—É—Ç—ã ErrorBoundary |
| `fallback`         | `ReactNode \| (error: Error, errorInfo: ErrorInfo) => ReactNode` | ‚Äî                 | –ö–∞—Å—Ç–æ–º–Ω—ã–π fallback UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç                           |
| `logPrefix`        | `string`                                                         | `'ErrorBoundary'` | –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫                            |
| `onError`          | `(error: Error, errorInfo: ErrorInfo) => void`                   | ‚Äî                 | Callback —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –ø—Ä–∏ –æ—à–∏–±–∫–µ                   |
| `showReloadButton` | `boolean`                                                        | `true`            | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã            |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### ErrorBoundary –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤:

- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ try/catch
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ** (setTimeout, –ø—Ä–æ–º–∏—Å—ã) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –≤ catch –±–ª–æ–∫–∞—Ö
- **–°–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ (SSR)** ‚Äî ErrorBoundary —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–û—à–∏–±–∫–∞—Ö, –≤—ã–±—Ä–æ—à–µ–Ω–Ω—ã—Ö –≤ —Å–∞–º–æ–º ErrorBoundary** ‚Äî —Ä–∞–∑–º–µ—â–∞–π—Ç–µ ErrorBoundary –≤—ã—à–µ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- ‚úÖ –†–∞–∑–º–µ—â–∞–π—Ç–µ ErrorBoundary –Ω–∞ **–≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ** –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–Ω–µ—Å–∫–æ–ª—å–∫–æ ErrorBoundary** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ **–ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `onError` callback –¥–ª—è **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –û–±–µ—Ä—Ç–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```tsx
import { ErrorBoundary } from '@platform/ui';

function App() {
  return (
    <ErrorBoundary>
      <YourApp />
    </ErrorBoundary>
  );
}
```

### –û–±–µ—Ä—Ç–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è

```tsx
import { ErrorBoundary } from '@platform/ui';

function ModuleContainer() {
  return (
    <ErrorBoundary
      logPrefix="ModuleContainer"
      fallback={(error) => (
        <div>
          <h2>–û—à–∏–±–∫–∞ –≤ –º–æ–¥—É–ª–µ</h2>
          <p>{error.message}</p>
        </div>
      )}
    >
      <YourModule />
    </ErrorBoundary>
  );
}
```

### –° –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```tsx
import { ErrorBoundary } from '@platform/ui';
import type { ErrorInfo } from 'react';

function App() {
  const handleError = (error: Error, errorInfo: ErrorInfo) => {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–∫–∏ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    sendErrorToMonitoring(error, errorInfo);

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    console.error('Application error:', error, errorInfo);
  };

  return (
    <ErrorBoundary onError={handleError} logPrefix="App.ErrorBoundary">
      <YourApp />
    </ErrorBoundary>
  );
}
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ ErrorBoundary –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

```tsx
import { ErrorBoundary } from '@platform/ui';

function App() {
  return (
    <ErrorBoundary logPrefix="App">
      <Header />

      <ErrorBoundary logPrefix="Sidebar">
        <Sidebar />
      </ErrorBoundary>

      <ErrorBoundary logPrefix="MainContent">
        <MainContent />
      </ErrorBoundary>

      <ErrorBoundary logPrefix="Footer">
        <Footer />
      </ErrorBoundary>
    </ErrorBoundary>
  );
}
```
