# Proxy Server

Прокси-сервер для разработки с интеграцией MSW (Mock Service Worker).

## Описание

Proxy-server работает на порту **1337** и перехватывает запросы, модифицируя ответы в зависимости от настроек конфигурации.

## Функциональность

### 1. Обработка `/app/start`

- **С моками**: Перехватывает запрос через MSW и обогащает ответ данными из манифеста (`.launcher/current-manifest.json`)
- **Без моков**: Проксирует запрос на удаленный сервер (`apiUrl` из настроек конфигурации) и обогащает ответ данными из манифеста

### 2. Обработка остальных запросов

- **С моками для модуля**: Использует `mockHandlers` из конфига модуля через MSW
- **Без моков для модуля**: Проксирует запрос на `apiUrl` из настроек конфигурации
- **Без mockHandlers**: Возвращает 404, если у модуля нет обработчиков

## Установка

```bash
cd config/proxy-server
npm install
```

## Запуск

```bash
npm start
# или для разработки с автоперезагрузкой
npm run dev
```

## Конфигурация

Proxy-server автоматически читает:
- `.launcher/current-manifest.json` - манифест модулей
- `.launcher/configs.json` - конфигурации запуска

Использует активную конфигурацию (`lastUsed` из `configs.json`).

## Определение модуля по пути

Сейчас используется простая логика определения модуля по пути запроса:
- `/jokes/*` → модуль `api_example`

Для добавления новых модулей нужно обновить функцию `getModuleByPath` в `index.ts`.

## Зависимости

- `express` - веб-сервер
- `msw` - Mock Service Worker для Node.js
- `axios` - HTTP клиент для проксирования
- `cors` - CORS middleware
- `tsx` - TypeScript executor

